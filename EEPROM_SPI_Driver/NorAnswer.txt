Что изменится, если будет необходимо реализовать драйвер для работы с NOR памятью (например, W25Q128)

1. Общий принцип работы памяти

EEPROM (например, 25LC040A):
- Поддерживает побайтовую запись
- Не требует предварительного стирания
- Допускает изменение отдельных битов как 0->1, так и 1->0(автоматически выполняет erase)
- Обычно имеет небольшой объём

NOR Flash (например, W25Q128):
- Требует обязательного стирания перед записью
- Стирание производится блоками
- Запись выполняется страницами
- Изменение возможно только из состояния 1->0
- Для установки бита обратно в 1 требуется стирание
- Имеет большой объём


2. Адресация

EEPROM 25LC040A:
- Использует 9-битную адресацию

NOR Flash W25Q128:
- Использует 24-битную адресацию


3. Процедура записи

EEPROM:
1. WREN
2. WRITE
3. Адрес
4. Данные
5. Ожидание завершения (WIP)

NOR Flash:
1. WREN
2. Sector Erase (если требуется)
3. Ожидание завершения erase
4. WREN
5. Page Program(запись страницы)
6. Адрес
7. Данные
8. Ожидание завершения записи


4. Команды SPI

EEPROM:
- READ (0x03)
- WRITE (0x02)
- WREN (0x06)
- RDSR (0x05)

NOR Flash:
- READ (0x03)
- FAST READ (0x0B)
- PAGE PROGRAM (0x02)
- SECTOR ERASE (0x20)
- BLOCK ERASE (0xD8)
- CHIP ERASE (0xC7)
- RDSR (0x05)
- WREN (0x06)